<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">

<link href="resources/jQueryAssets/jquery.ui.core.min.css" rel="stylesheet" type="text/css">
<link href="resources/jQueryAssets/jquery.ui.theme.min.css" rel="stylesheet" type="text/css">
<link href="resources/jQueryAssets/jquery.ui.slider.min.css" rel="stylesheet" type="text/css">
<link href="resources/colorbox.css" rel="stylesheet" type="text/css"/>
<link href="resources/jvectormap/jquery-jvectormap-1.2.2.css" rel="stylesheet" type="text/css" media="screen" />
<link href="resources/map_timeline.css" rel="stylesheet" type="text/css" />
<script src="resources/jQueryAssets/jquery-1.8.3.min.js" type="text/javascript"></script>
<script src="resources/jQueryAssets/jquery-ui-1.9.2.slider.custom.min.js" type="text/javascript"></script>
<script src="resources/colorbox/jquery.colorbox.js" type="text/javascript"></script>
<script src="resources/jquery.ui.touch-punch/touch-punch.min.js" type="text/javascript"></script>
<script src="resources/hammer/hammer.js" type="text/javascript"></script>
<script src="resources/jvectormap/jquery-jvectormap-1.2.2.min.js"></script>
<script src="resources/jvectormap/jquery-jvectormap-world-mill-en.js"></script>
<script src="resources/country-data.js"></script>
<title>Map</title>
<style type="text/css">
.jvectormap-region {
	stroke: #000000;
	stroke-width: 0.2px;
}


.menu_image {
	height: 40px;
	padding: 30px 0px 30px 30px;
	float: right;
	border: 0px;
}

.image_in_box {
	position: absolute;
	right: 0px;
	bottom: 0px;
}
</style>
</head>

<body>

	<div id="page" class="page_all">
		<div id="content" style="width: 98%; height: 83%; padding:1% 1% 1% 1%">
			<!-- Your work space is 980px by 581px -->
			<!-- example box is just to demonstrate the size and location of your space -->
			<!-- feel free to change/delete it if you want -->
			<div id="example_box" style="width: 100%; height: 100%;overflow:hidden;position:relative; background-color: #ffffff">
			
			

	<div style="width:978px;height:579px;overflow:hidden;position:relative;border:0px solid blue">
	<div id="world-map" style="width:2152px; height: 1274px; position:absolute; top:-230px; right:-260px">
	
	</div>
	</div>
	
<script>
		function submitId(item_id) {
			var idtext = "itemId=" + item_id;
			var urltext = "content.html?" + idtext;
			$.colorbox({
				iframe : true,
				innerWidth : "880px",
				innerHeight : "580px",
				initialWidth : "880px",
				initialHeight : "580px",
				scrolling : false,
				top : "60px",
				left : "65px",
				title : idtext,
				href : urltext
			});
		}
	</script>
	
<script>

function generateListsOfIds() { 
	if (window.XMLHttpRequest) {
		// code for IE7+, Firefox, Chrome, Opera, Safari
		xmlhttp = new XMLHttpRequest();
	} else {
		// code for IE6, IE5
		xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
	}
	xmlhttp.open("GET", "contents/extended_label.xml", false);
	xmlhttp.send();
	xmlDoc = xmlhttp.responseXML;
	var x = xmlDoc.getElementsByTagName("object");
	
	var listofid = new Array();
	for (i = 0; i < x.length; i++) {
		listofid[i] = x[i].getElementsByTagName("Id")[0].childNodes[0].nodeValue;
	}
	return listofid;
}
</script>


<script>
		function getDataFromAccessNumber(Accession_number, tagname) {
			if (window.XMLHttpRequest) {
				// code for IE7+, Firefox, Chrome, Opera, Safari
				xmlhttp = new XMLHttpRequest();
			} else {
				// code for IE6, IE5
				xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
			}
			xmlhttp.open("GET", "contents/extended_label.xml", false);
			xmlhttp.send();
			xmlDoc = xmlhttp.responseXML;
			var x = xmlDoc.getElementsByTagName("object");
			for (i = 0; i < x.length; i++) {
				var idNum = x[i].getElementsByTagName("Id")[0].childNodes[0].nodeValue;
				if (idNum === Accession_number) {
					var toreturn = x[i].getElementsByTagName(tagname)[0].childNodes[0].nodeValue;
					return x[i].getElementsByTagName(tagname)[0].childNodes[0].nodeValue;
				}
			}
			return false;
		}
	</script>
	
	<script>
	
	

		var Id;
		Id = generateListsOfIds();
		var markers = [];
		var i = 0;
		var len = Id.length;

		
		
		for (; i < len;) {
			markers.push({
				latLng : [ getDataFromAccessNumber(Id[i], 'lat'),
						getDataFromAccessNumber(Id[i], 'Lng') ],
				name : Id[i]
			});
			var cc = getDataFromAccessNumber(Id[i], 'country');
			countryData.cc = 1;
			i = i + 1;
		}

		$(function() {
			$('#world-map').vectorMap({
				map : 'world_mill_en',
				series : {
					regions : [ {
						values : countryData,
						scale : [ '#989898', '#585858' ],
						normalizeFunction : 'polynomial'
					} ]
				},
				onLabelShow : function(e, el, code) {
					el.html(el.html() + ' (country - ' + countryData[code] + ')');
				},

				scaleColors : [ '#C8EEFF', '#0071A4' ],
				normalizeFunction : 'polynomial',
				hoverOpacity : 0.7,
				hoverColor : false,
				markerStyle : {
					initial : {
						fill : '#F8E23B',
						stroke : '#383f47',
						r:"8"
					}
				},
				regionStyle : {
					initial : {
						fill : '#C0C0C0',
						stroke : '#383f47'
					}
				},
				backgroundColor : '#FFFFFF',
				markers : markers,
				onMarkerOver : function(events, index) {
					var item_id = markers[index].name;
					submitId(item_id);
				},
				onMarkerClick : function(events, index) {
					var item_id = markers[index].name;
					submitId(item_id);
				},
			});
		});
	</script>
			



				
			</div>
		</div>
		
		<!-- DO NOT TOUCH ANYTHING IN THIS DIV -->
		<div id="menu" style="width: 98%; height: 13%; padding: 0% 1% 2% 1%">
			<div id="page_name" style="width: 100%; height: 100%">

				<img src="resources/images/map.png" alt="map" class="menu_image" style="float:left"/>

				<a href="help.html" class="help_page"><img src="resources/images/help.png" 
				alt="help page" class="menu_image"/></a>
				<a href="timeline.html"><img src="resources/images/timeline.png" 
				alt="timeline page" class="menu_image"/></a>
				<a href="home.html"> <img src="resources/images/home.png" 
				alt="home page" class="menu_image"/></a>

			</div>
			
		</div>

	</div>



	<script>
		jQuery('a.help_page').colorbox({
			initialHeight : 540,
			initialWidth : 540,
			innerHeight : 540,
			innerWidth : 540,
			top : 60,
			left : 240
		});
	</script>
</body>
</html>
