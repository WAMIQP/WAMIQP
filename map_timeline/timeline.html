<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">

<link href="resources/jQueryAssets/jquery.ui.core.min.css"
	rel="stylesheet" type="text/css">
<link href="resources/jQueryAssets/jquery.ui.theme.min.css"
	rel="stylesheet" type="text/css">
<link href="resources/jQueryAssets/jquery.ui.slider.min.css"
	rel="stylesheet" type="text/css">
<link href="resources/colorbox.css" rel="stylesheet" type="text/css" />
<link href="resources/map_timeline.css" rel="stylesheet" type="text/css" />
<script src="resources/jQueryAssets/jquery-1.8.3.min.js"
	type="text/javascript"></script>
<script src="resources/jQueryAssets/jquery-ui-1.9.2.slider.custom.min.js"
	type="text/javascript"></script>
<script src="resources/colorbox/jquery.colorbox.js"
	type="text/javascript"></script>
<script src="resources/touch-punch/jquery.ui.touch-punch.min.js"
	type="text/javascript"></script>
<script src="resources/hammer/hammer.js" type="text/javascript"></script>

<title>Timeline</title>
<style type="text/css">
.image_in_box {
	position: absolute;
	right: 0px;
	bottom: 0px;
}

.menu_image {
	height: 40px;
	padding: 30px 0px 30px 30px;
	float: right;
	border: 0px;
}

.thumbnail {
	max-width: 240px;
	max-height: 290px;
}

.picture_div {
	width: 250px;
	height: 350px;
	float: left;
	font-size: 22px;
	font-weight: bold;
	display: block;
	margin-right: 20px;
	text-align: center;
}

.picture_border {
	min-width: 240px;
	min-height: 290px;
	display: block;
	margin-bottom: 10px;
	border: 4px solid black;
}
</style>
</head>

<body>
	<script>
		function submitId(item_id) {
			var element = document.getElementById(item_id);
			var idtext = "itemId=" + item_id;
			var urltext = "content.html?" + idtext;
			$.colorbox({
				iframe : true,
				innerWidth : "880px",
				innerHeight : "580px",
				initialWidth : "497px",
				initialHeight : "297px",
				scrolling : false,
				top : "60px",
				left : "65px",
				title : idtext,
				href : urltext
			});
		}
	</script>

	<script>
	
		function generateLinks() {
			if (window.XMLHttpRequest) {
				// code for IE7+, Firefox, Chrome, Opera, Safari
				xmlhttp = new XMLHttpRequest();
			} else {
				// code for IE6, IE5
				xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
			}
			xmlhttp.open("GET", "contents/extended_label.xml", false);
			xmlhttp.send();
			xmlDoc = xmlhttp.responseXML;

			var x = xmlDoc.getElementsByTagName("object");
			for (i = 0; i < x.length; i++) {
				var idNum = x[i].getElementsByTagName("Id")[0].childNodes[0].nodeValue;
				var picname = x[i].getElementsByTagName("Picture")[0].childNodes[0].nodeValue;
				var date = x[i].getElementsByTagName("Date")[0].childNodes[0].nodeValue;
				var towrite = "";
				towrite = towrite + "<div class=\"picture_div\" onclick=\"submitId("+idNum+")\">";
				towrite = towrite + "<div class=\"picture_border\">";
				towrite = towrite + "<img src=\"contents\\object_images\\"+picname + "\" class=\"thumbnail\"/> </div>";
				towrite = towrite + date + "</div>";
				//alert(towrite);
				document.write(towrite);

			}
		}
	</script>

	<div id="page" class="page_all">
		<div id="content"
			style="width: 98%; height: 83%; padding: 1% 1% 1% 1%">
			<!-- Your work space is 900px by 450px -->
			<!-- example box is just to demonstrate the size and location of your space -->
			<!-- feel free to change/delete it if you want -->
			<div id="example_box"
				style="width: 100%; height: 100%; overflow: hidden; position: relative; background-color: #ffffff">
				<div id="side_outside"
					style="width: 83%; height: 360px; background-color: #ffffff; overflow: hidden; margin: 80px; margin-top: 100px; overflow: hidden">
					<!--this is the actual box-->
					<div id="side_inside"
						style="height: 300px; width: 3650px; background-color: #ffffff">
						<script>
						generateLinks();
						</script>
					</div>
				</div>
				<div style="width: 100%; height: 10%">

					<div id="timeline_slider" style="margin-left: 85px"></div>
				</div>
			</div>
		</div>

		<!-- DO NOT TOUCH ANYTHING IN THIS DIV -->
		<div id="menu" style="width: 98%; height: 13%; padding: 0% 1% 2% 1%">
			<div id="page_name" style="width: 100%; height: 100%; background-color: #ffffff">

				<h1 style="margin:20px;float:left"><b>timeline</b></h1>

				<a href="help.html" class="help_page"><img src="resources/images/help.png" 
				alt="help page" class="menu_image"/></a>
				<a href="map.html"><img src="resources/images/map.png" 
				alt="map page" class="menu_image"/></a>
				<a href="home.html"> <img src="resources/images/home.png" 
				alt="home page" class="menu_image"/></a>

			</div>
			
		</div>

	</div>
	<script type="text/javascript">
		function SideScroll(location) {
			location = (700 + location);
			timelocation = 3000*location/2800;
			$("#side_outside").scrollLeft(timelocation);
		};
	</script>
	<script>
		$(function() {
			$("#timeline_slider").slider({
				min : -700,
				max : 2100,
				step : 20,
				value : -700,
			});
			$("#timeline_slider").css('height', '20px');
			$("#timeline_slider").css('width', '800px');
			$("#timeline_slider").css('background', 'rgb(250,250,250)');
			$("#timeline_slider .ui-slider-handle").css('height', '30px');
			$("#timeline_slider .ui-slider-handle").css('width', '70px');
			$("#timeline_slider .ui-slider-handle").css('background','rgb(70,70,70)');
			$( "#timeline_slider" ).slider({
				slide:function (event, ui) {
					SideScroll(ui.value);
				}
			}); 
		});
		$("#timeline_slider").draggable();
		</script>
		
		<script>
			function doScroll(amount,direction) {
				var val = $("#timeline_slider").slider("value");
				if(direction === "left") {
					val = val + amount;
				}
				if(direction === "right") {
					val = val - amount;
				}
				SideScroll(val);
				$("#timeline_slider").slider({
					value : val
				});
			}
		</script>
		
		<script>
		function slideScroll(total_amount,direction) {
			var baseval = 20;
			var amount = baseval;
			var timeout = baseval;
			var times = total_amount/amount;
			var i = 0;
			for (; i < times; i = i+1) {
					setTimeout(function() {
						doScroll(amount, direction)
					}, timeout);
					timeout = baseval * i;
				}
			}
		</script>

	<script>
		var toggle = document.getElementById('side_inside');

		Hammer(toggle).on("dragend", function(event) {
			event.gesture.preventDefault();
			event.gesture.stopDetect();
			var dx = event.gesture.deltaX;
			var direction = "right";
			if (dx < 0) {
				dx = 0 - dx;
				direction = "left";
			}
			if (dx >= 100) {
				slideScroll(400, direction);
			} else {
				return false;

			}
		});
	</script>
	<script>
		jQuery('a.help_page').colorbox({
			initialHeight : 540,
			initialWidth : 540,
			innerHeight : 540,
			innerWidth : 540,
			top : 60,
			left : 240
		});
	</script>

</body>
</html>
